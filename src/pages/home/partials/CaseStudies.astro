---
import Container from "@/components/Container.astro";
import { SectionIntro } from "@/components/SectionIntro";
import { FadeInStagger, FadeIn } from "@/components/FadeIn";
import { Image } from "astro:assets";
import { pluck } from "ramda";

const caseStudies = pluck(
    "caseStudy",
    await Astro.glob("@/pages/work/**/*.mdx"),
);
---

<SectionIntro
    title="Harnessing technology for a brighter future"
    className="mt-24 sm:mt-32 lg:mt-40"
    client:load
>
    <p>
        We believe technology is the answer to the world’s greatest challenges.
        It’s also the cause, so we find ourselves in bit of a catch 22
        situation.
    </p>
</SectionIntro>

<Container className="mt-16">
    <FadeInStagger
        className="grid grid-cols-1 gap-8 lg:grid-cols-3"
        client:load
    >
        {
            caseStudies.map((caseStudy) => (
                <FadeIn key={caseStudy.href} className="flex" client:load>
                    <article class="relative flex w-full flex-col rounded-3xl p-6 ring-1 ring-neutral-950/5 transition hover:bg-neutral-50 sm:p-8">
                        <h3>
                            <a href={caseStudy.href}>
                                <span class="absolute inset-0 rounded-3xl" />
                                <Image
                                    src={caseStudy.image.src}
                                    alt={caseStudy.client}
                                    class="h-16 w-16"
                                />
                            </a>
                        </h3>
                        <p class="mt-6 flex gap-x-2 text-sm text-neutral-950">
                            <time
                                dateTime={caseStudy.date.split("-")[0]}
                                class="font-semibold"
                            >
                                {caseStudy.date.split("-")[0]}
                            </time>
                            <span class="text-neutral-300" aria-hidden="true">
                                /
                            </span>
                            <span>Case study</span>
                        </p>
                        <p class="mt-6 font-display text-2xl font-semibold text-neutral-950">
                            {caseStudy.title}
                        </p>
                        <p class="mt-4 text-base text-neutral-600">
                            {caseStudy.description}
                        </p>
                    </article>
                </FadeIn>
            ))
        }
    </FadeInStagger>
</Container>
